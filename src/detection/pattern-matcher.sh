[Content of pattern-matcher.sh from our discussion]
